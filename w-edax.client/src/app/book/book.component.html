<div class="book-container" *ngIf="books && books.length > 0; else loadingSkeleton">
  <div class="book-opener">
    <h2 class="heading">~ Books Review ~</h2>
    <p>
      Welcome to the Books Review page, where I curate a selection of insightful reads.<br>
    </p>
  </div>

  <section class="featured-book">
    <div class="left-container">
      <img [src]="selectedBook?.image" alt="{{ selectedBook?.title }}" class="book-image" />
      <h3>{{ selectedBook?.title }}</h3>
      <div class="book-meta-data">
        <p><strong>Author:</strong> {{ selectedBook?.author }}</p>
        <p><strong>Publisher:</strong> {{ selectedBook?.metadata?.publisher }}</p>
        <p><strong>Year:</strong> {{ selectedBook?.metadata?.year }}</p>
        <p><strong>Genre:</strong> {{ selectedBook?.metadata?.genre }}</p>
      </div>
    </div>
    <div class="right-container">
      <h3>Review</h3>
      <div *ngFor="let paragraph of selectedBook?.review">
        <p>{{ paragraph }}</p>
      </div>
    </div>
  </section>

  <section class="book-list">
    <h2>Other Books</h2>
    <div class="books-grid">
      <div *ngFor="let book of books" class="book-item" (click)="selectBook(book)" [ngClass]="{'selected': selectedBook?.title === book.title}">
        <img [src]="book.image" alt="{{ book.title }}" class="book-thumbnail" />
        <h3>{{ book.title }}</h3>
        <p><strong>Author:</strong> {{ book.author }}</p>
      </div>
    </div>
  </section>
</div>

<!-- Skeleton loading state -->
<ng-template #loadingSkeleton>
  <div class="book-opener skeleton-opener">
    <div class="skeleton skeleton-title"></div>
    <div class="skeleton skeleton-paragraph"></div>
    <div class="skeleton skeleton-paragraph"></div>
    <div class="skeleton skeleton-paragraph"></div>
  </div>

  <div class="featured-book">
    <div class="left-container">
      <div class="skeleton skeleton-image"></div>
      <div class="skeleton skeleton-title"></div>
      <div class="book-meta-data skeleton-meta-data"> <!-- Adding skeleton for book metadata -->
        <div class="skeleton skeleton-meta"></div>
        <div class="skeleton skeleton-meta"></div>
        <div class="skeleton skeleton-meta"></div>
        <div class="skeleton skeleton-meta"></div>
      </div>
    </div>
    <div class="right-container">
      <h3 class="skeleton skeleton-title"></h3>
      <div>
        <div class="skeleton skeleton-meta"></div>
        <div class="skeleton skeleton-meta"></div>
        <div class="skeleton skeleton-meta"></div>
      </div>
    </div>
  </div>

  <section class="book-list">
    <h2>Loading Other Books...</h2>
    <div class="books-grid">
      <div class="skeleton-item" *ngFor="let book of [1, 2, 3, 4, 5, 6]"></div>
    </div>
  </section>
</ng-template>
